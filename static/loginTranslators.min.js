function hash(o){function n(o,n){var e,i,t,s,a;return t=2147483648&o,s=2147483648&n,a=(1073741823&o)+(1073741823&n),(e=1073741824&o)&(i=1073741824&n)?2147483648^a^t^s:e|i?1073741824&a?3221225472^a^t^s:1073741824^a^t^s:a^t^s}function e(o,e,i,t,s,a,d){return o=n(o,n(n(e&i|~e&t,s),d)),n(o<<a|o>>>32-a,e)}function i(o,e,i,t,s,a,d){return o=n(o,n(n(e&t|i&~t,s),d)),n(o<<a|o>>>32-a,e)}function t(o,e,i,t,s,a,d){return o=n(o,n(n(e^i^t,s),d)),n(o<<a|o>>>32-a,e)}function s(o,e,i,t,s,a,d){return o=n(o,n(n(i^(e|~t),s),d)),n(o<<a|o>>>32-a,e)}function a(o){var n,e="",i="";for(n=0;n<=3;n++)e+=(i="0"+(i=o>>>8*n&255).toString(16)).substr(i.length-2,2);return e}var d,r,g,c,l,h,u,m,f;for(o+=2147483648,d=function(o){for(var n,e=o.length,i=16*(((n=e+8)-n%64)/64+1),t=Array(i-1),s=0,a=0;a<e;)s=a%4*8,t[n=(a-a%4)/4]|=o.charCodeAt(a)<<s,a++;return t[n=(a-a%4)/4]|=128<<a%4*8,t[i-2]=e<<3,t[i-1]=e>>>29,t}(o=function(o){o=o.replace(/\r\n/g,"\n");for(var n="",e=0;e<o.length;e++){var i=o.charCodeAt(e);i<128?n+=String.fromCharCode(i):(127<i&&i<2048?n+=String.fromCharCode(i>>6|192):(n+=String.fromCharCode(i>>12|224),n+=String.fromCharCode(i>>6&63|128)),n+=String.fromCharCode(63&i|128))}return n}(o)),h=1732584193,u=4023233417,m=2562383102,f=271733878,o=0;o<d.length;o+=16)h=e(r=h,g=u,c=m,l=f,d[o+0],7,3614090360),f=e(f,h,u,m,d[o+1],12,3905402710),m=e(m,f,h,u,d[o+2],17,606105819),u=e(u,m,f,h,d[o+3],22,3250441966),h=e(h,u,m,f,d[o+4],7,4118548399),f=e(f,h,u,m,d[o+5],12,1200080426),m=e(m,f,h,u,d[o+6],17,2821735955),u=e(u,m,f,h,d[o+7],22,4249261313),h=e(h,u,m,f,d[o+8],7,1770035416),f=e(f,h,u,m,d[o+9],12,2336552879),m=e(m,f,h,u,d[o+10],17,4294925233),u=e(u,m,f,h,d[o+11],22,2304563134),h=e(h,u,m,f,d[o+12],7,1804603682),f=e(f,h,u,m,d[o+13],12,4254626195),m=e(m,f,h,u,d[o+14],17,2792965006),h=i(h,u=e(u,m,f,h,d[o+15],22,1236535329),m,f,d[o+1],5,4129170786),f=i(f,h,u,m,d[o+6],9,3225465664),m=i(m,f,h,u,d[o+11],14,643717713),u=i(u,m,f,h,d[o+0],20,3921069994),h=i(h,u,m,f,d[o+5],5,3593408605),f=i(f,h,u,m,d[o+10],9,38016083),m=i(m,f,h,u,d[o+15],14,3634488961),u=i(u,m,f,h,d[o+4],20,3889429448),h=i(h,u,m,f,d[o+9],5,568446438),f=i(f,h,u,m,d[o+14],9,3275163606),m=i(m,f,h,u,d[o+3],14,4107603335),u=i(u,m,f,h,d[o+8],20,1163531501),h=i(h,u,m,f,d[o+13],5,2850285829),f=i(f,h,u,m,d[o+2],9,4243563512),m=i(m,f,h,u,d[o+7],14,1735328473),h=t(h,u=i(u,m,f,h,d[o+12],20,2368359562),m,f,d[o+5],4,4294588738),f=t(f,h,u,m,d[o+8],11,2272392833),m=t(m,f,h,u,d[o+11],16,1839030562),u=t(u,m,f,h,d[o+14],23,4259657740),h=t(h,u,m,f,d[o+1],4,2763975236),f=t(f,h,u,m,d[o+4],11,1272893353),m=t(m,f,h,u,d[o+7],16,4139469664),u=t(u,m,f,h,d[o+10],23,3200236656),h=t(h,u,m,f,d[o+13],4,681279174),f=t(f,h,u,m,d[o+0],11,3936430074),m=t(m,f,h,u,d[o+3],16,3572445317),u=t(u,m,f,h,d[o+6],23,76029189),h=t(h,u,m,f,d[o+9],4,3654602809),f=t(f,h,u,m,d[o+12],11,3873151461),m=t(m,f,h,u,d[o+15],16,530742520),h=s(h,u=t(u,m,f,h,d[o+2],23,3299628645),m,f,d[o+0],6,4096336452),f=s(f,h,u,m,d[o+7],10,1126891415),m=s(m,f,h,u,d[o+14],15,2878612391),u=s(u,m,f,h,d[o+5],21,4237533241),h=s(h,u,m,f,d[o+12],6,1700485571),f=s(f,h,u,m,d[o+3],10,2399980690),m=s(m,f,h,u,d[o+10],15,4293915773),u=s(u,m,f,h,d[o+1],21,2240044497),h=s(h,u,m,f,d[o+8],6,1873313359),f=s(f,h,u,m,d[o+15],10,4264355552),m=s(m,f,h,u,d[o+6],15,2734768916),u=s(u,m,f,h,d[o+13],21,1309151649),h=s(h,u,m,f,d[o+4],6,4149444226),f=s(f,h,u,m,d[o+11],10,3174756917),m=s(m,f,h,u,d[o+2],15,718787259),u=s(u,m,f,h,d[o+9],21,3951481745),h=n(h,r),u=n(u,g),m=n(m,c),f=n(f,l);return(a(h)+a(u)+a(m)+a(f)).toLowerCase()}function showLoginCard(){setTimeout(()=>{$(".ui.card").transition("fade down"),$("#username").focus()},200)}function doLogin(o,n){$("#connection-failed").addClass("hidden"),$("#login-failed").addClass("hidden"),$("#pending-account").addClass("hidden"),$("#suspended-account").addClass("hidden"),o&&n?isLoggingIn||(isLoggingIn=!0,axios.post(appURL,{username:o,password:n}).then(e=>{isLoggingIn=!1,200==e.status?"FAILED"===e.data?($("#password").val(""),$("#logging-in").is(":visible")?($("#logging-in").hide(),showLoginCard()):($("#login-failed").removeClass("hidden"),$("#login-failed-text").text("Please try again.")),document.cookie="lp="):"DISABLED"===e.data?($("#password").val(""),$("#logging-in").is(":visible")?($("#logging-in").hide(),showLoginCard()):($("#login-failed").removeClass("hidden"),$("#login-failed-text").text("Your account has been disabled.")),document.cookie="lp="):"PENDING"===e.data?($("#password").val(""),$("#logging-in").is(":visible")?($("#logging-in").hide(),showLoginCard()):$("#pending-account").removeClass("hidden")):"SUSPENDED"===e.data?($("#password").val(""),$("#logging-in").is(":visible")?($("#logging-in").hide(),showLoginCard()):$("#suspended-account").removeClass("hidden")):(($("#remember-checkbox").is(":checked")||ch)&&(document.cookie="lu="+o,document.cookie="lp="+n),"object"==typeof e.data&&e.data.agreement?($("body").empty(),$("body").append(e.data.agreement)):(isLogginIn=!0,postToken(appURL,e.data))):$("#connection-failed").removeClass("hidden")}).catch(()=>{isLoggingIn=!1,$("#connection-failed").removeClass("hidden")})):o?$("#password").focus():$("#username").focus()}function postToken(o,n){sessionStorage.setItem("tt",n);var e=$(`<form action="${o}" method="post"><input type="hidden" name="t" value="${n}" /></form>`);$("body").append(e),e.submit()}function doLoginWithFormData(){const o=$("#username").val(),n=$("#password").val();doLogin(o,hash(n))}function getCookie(o){let n=o+"=",e=decodeURIComponent(document.cookie).split(";");for(let o=0;o<e.length;o++){let i=e[o];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(n))return i.substring(n.length,i.length)}return""}void 0!==window.orientation?document.getElementById("mobile-warning").style.display="block":window.chrome||(document.getElementById("chrome-warning").style.display="block");const appURL=window.location;let isLoggingIn=!1;const storedUsername=getCookie("lu");let storedPassword=getCookie("lp"),ch=!1;"string"==typeof storedPassword&&storedPassword&&!storedPassword.match(/^[0-9a-f]{32}$/)&&(storedPassword=hash(storedPassword),ch=!0),storedUsername&&storedPassword?($("#logging-in").show(),doLogin(storedUsername,storedPassword)):showLoginCard(),$(".ui.checkbox").checkbox(),$("#password").keypress(function(o){13==o.which&&doLoginWithFormData()}),$("#login-button").click(function(){doLoginWithFormData()});